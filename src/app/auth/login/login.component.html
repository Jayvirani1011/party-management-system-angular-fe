<div class="d-flex justify-content-center align-items-center vh-100 p-3">
  <mat-card style="max-width: 420px; box-shadow: rgba(60, 64, 67, 0.3) 0px 1px 2px 0px, rgba(60, 64, 67, 0.15) 0px 1px 3px 1px;">
    <mat-card-header>
      <mat-card-title>
        <h2>Sign In</h2>
      </mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <p class="text-muted">
        Please enter your username and password to log in.
      </p>
      <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">
        <mat-form-field appearance="outline" class="w-100 mb-3">
          <mat-label>Username</mat-label>
          <input
            matInput
            formControlName="username"
            placeholder="Enter your username"
          />
          <mat-icon matPrefix>person</mat-icon>
          <mat-error *ngIf="loginForm.get('username')?.hasError('required')"
            >Username is required</mat-error
          >
          <mat-error *ngIf="loginForm.get('username')?.hasError('username')"
            >Enter a valid username</mat-error
          >
        </mat-form-field>

        <mat-form-field appearance="outline" class="w-100 mb-3">
          <mat-label>Password</mat-label>
          <input
            matInput
            [type]="hidePassword ? 'password' : 'text'"
            formControlName="password"
            placeholder="Enter your password"
          />
          <mat-icon matPrefix>lock</mat-icon>
          <button
            mat-icon-button
            matSuffix
            (click)="passwordToggle($event)"
            [attr.aria-label]="'Hide password'"
            [attr.aria-pressed]="hidePassword"
          >
            <mat-icon>{{
              hidePassword ? "visibility_off" : "visibility"
            }}</mat-icon>
          </button>
          <mat-error *ngIf="loginForm.get('password')?.hasError('required')"
            >Password is required</mat-error
          >
          <mat-error *ngIf="loginForm.get('password')?.hasError('minlength')"
            >Password must be at least 6 characters long</mat-error
          >
        </mat-form-field>

        <div class="text-center">
          <button
            mat-flat-button
            color="accent"
            type="submit"
            [disabled]="logging"
            class="w-50 rounded-5"
            style="height: 2.5rem"
          >
            <span class="d-flex gap-2">
              <ng-container *ngIf="logging; else notLogging">
                <mat-spinner
                  [diameter]="20"
                  [strokeWidth]="1"
                  color="light"
                ></mat-spinner>
              </ng-container>
              <ng-template #notLogging>
                <span>Sign In</span>
              </ng-template>
            </span>
          </button>
        </div>
      </form>
    </mat-card-content>
  </mat-card>
</div>
